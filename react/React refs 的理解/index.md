# react refs

## 概念

React 中的 Refs提供了一种方式，允许我们访问 DOM 节点或在 render 方法中创建的 React 元素

本质为ReactDOM.render()返回的组件实例，如果是渲染组件则返回的是组件实例，如果渲染dom则返回的是具体的dom节点

> refs可以用来获取实际dom也可以用来获取实例元素，类组件就是获取实例元素

## 如何使用

创建ref的形式有三种：

1. 传入字符串，使用时通过 this.refs.传入的字符串的格式获取对应的元素
2. 传入对象，对象是通过 React.createRef() 方式创建出来，使用时获取到创建的对象中存在 current 属性就是对应的元素
3. 传入函数，该函数会在 DOM 被挂载时进行回调，这个函数会传入一个 元素对象，可以自己保存，使用时，直接拿到之前保存的元素对象即可
4. 传入hook，hook是通过 useRef() 方式创建，使用时通过生成hook对象的 current 属性就是对应的元素

上述三种情况都是ref属性用于原生HTML元素上，如果ref设置的组件为一个类组件的时候，ref对象接收到的是组件的挂载实例

- 注意的是，不能在函数组件上使用ref属性，因为他们并没有实例


## 应用场景

在某些情况下，我们会通过使用refs来更新组件，但这种方式并不推荐，更多情况我们是通过props与state的方式进行去重新渲染子元素

过多使用refs，会使组件的实例或者是DOM结构暴露，违反组件封装的原则

例如，避免在 Dialog 组件里暴露 open() 和 close() 方法，最好传递 isOpen 属性

但下面的场景使用refs非常有用：

1. 对Dom元素的焦点控制、内容选择、控制
2. 对Dom元素的内容设置及媒体播放
3. 对Dom元素的操作和对组件实例的操作
4. 集成第三方 DOM 库
